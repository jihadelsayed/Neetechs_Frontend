<section class="checkout-page">
  <div class="cp-inner">
    <!-- Loading -->
    @if (loading) {
      <div class="cp-card" >
        <p class="cp-eyebrow">Checking your payment…</p>
        <h1 class="cp-title">Verifying your checkout session.</h1>
        <p class="cp-text">
          Please wait a moment while we confirm your payment details.
        </p>
      </div>
    }
    <!-- Error -->
    @if (!loading && error) {
      <div class="cp-card cp-card--cancel">
        <p class="cp-eyebrow">Something went wrong</p>
        <h1 class="cp-title">We couldn’t verify your payment.</h1>
        <p class="cp-text">
          The session link is invalid or has already been used. If you think
          this is a mistake, contact us at <strong>info&#64;neetechs.com</strong>.
        </p>
        <div class="cp-actions">
          <a routerLink="/digital-products" class="btn btn-primary">
            Back to digital products
          </a>
        </div>
      </div>
    }
    <!-- Success -->
    @if (!loading && !error && session) {
    <div
      class="cp-card cp-card--success"
    >
      <div class="cp-status-icon">
        <span class="cp-checkmark">✓</span>
      </div>

      <p class="cp-eyebrow">Payment complete</p>
      <h1 class="cp-title">
        Your access to {{ session.product_name || 'the digital product' }} is ready.
      </h1>

      <p class="cp-text">
        Your payment was successful. We’ve sent you an email with your
        download link and instructions.
      </p>

      <div class="cp-actions">
        @if (session.download_url) {
          <a
            [href]="session.download_url"
            class="btn btn-primary"
          >
            Download files
          </a>
        }

        @if (session.product_slug) {
          <a
            [routerLink]="['/digital-products', session.product_slug]"
            class="btn btn-ghost"
          >
            View product page
          </a>
        }

        <a routerLink="/" class="btn btn-ghost">
          Go to homepage
        </a>
      </div>

      <p class="cp-note">
        Didn’t receive the email? Check your spam folder or search for
        “Neetechs digital product”.
      </p>
    </div>
    }
  </div>
</section>
